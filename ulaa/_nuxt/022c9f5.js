(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{1e3:function(e,t,r){"use strict";var n=r(41),o=(r(25),r(896)),c=new function e(){var t=this;Object(n.a)(this,e),this.load_image_xhr=function(e,r){return new Promise((function(e,n){o.a.load_xhr_url(url,r).then((function(r){t.load_image_url(r.blobUrl).then((function(image){e(image)}))}))}))},this.load_image_url=function(e,t){return new Promise((function(t,r){var image=new Image;image.onload=function(){t(image)},image.src=e}))}};t.a=c},1001:function(e,t,r){"use strict";var n=r(8),o=r(41),c=r(71),l=(r(39),r(25),r(84),r(610));r(1002),r(1003),r(1004),r(1005),window.THREE=l;var d=new(function(){function e(){var t=this;Object(o.a)(this,e),this.load_basis_url=function(e,r){return t._loadPromise(e,t._loader.basis,r)},this.load_gltf_url=function(e,r){return t._loadPromise(e,t._loader.gltf,r)},this.load_texture_url=function(e,r){return t._loadPromise(e,t._loader.texture,r)},this._loadPromise=function(e,t,r){return new Promise((function(n,o){t.load(e,(function(e){n(e)}),(function(e){r&&r(e)}),(function(t){console.log("error loading:",e),console.log(t),o(t)}))}))},this.setup()}var t;return Object(c.a)(e,[{key:"setup",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new l.LoadingManager,this._loader={},this._loader.basis=new l.BasisTextureLoader(t),this._loader.basis.setTranscoderPath("js/libs/three/v122/basis/"),this._loader.basis.detectSupport(new l.WebGLRenderer),this._loader.gltf=new l.GLTFLoader(t),this._loader.texture=new l.TextureLoader(t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}],[{key:"Events",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return Events}))}]),e}());t.a=d},1002:function(e,t,r){var n=r(193);r(86),r(396),r(25),r(677),r(654),r(655),r(656),r(657),r(658),r(659),r(660),r(661),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(675),r(676),r(42),r(32),r(33),r(418),r(18),r(895),r(35),r(237),r(54),r(31),r(49),r(47),r(795),r(796),r(770),r(798),r(771),r(17),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(115),r(109),r(9);var o=window.THREE=r(610);o.GLTFLoader=function(){function e(e){o.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new f(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new h(e)})),this.register((function(e){return new l(e)})),this.register((function(e){return new T(e)}))}function t(){var e={};return{get:function(t){return e[t]},add:function(t,object){e[t]=object},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(o.Loader.prototype),{constructor:e,load:function(e,t,r,n){var c,l=this;c=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:o.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);var d=function(t){n?n(t):console.error(t),l.manager.itemError(e),l.manager.itemEnd(e)},f=new o.FileLoader(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(e,(function(data){try{l.parse(data,c,(function(r){t(r),l.manager.itemEnd(e)}),d)}catch(e){d(e)}}),r,d)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(data,path,e,t){var content,n={},l={};if("string"==typeof data)content=data;else if(o.LoaderUtils.decodeText(new Uint8Array(data,0,4))===y){try{n[r.KHR_BINARY_GLTF]=new w(data)}catch(e){return void(t&&t(e))}content=n[r.KHR_BINARY_GLTF].content}else content=o.LoaderUtils.decodeText(new Uint8Array(data));var f=JSON.parse(content);if(void 0===f.asset||f.asset.version[0]<2)t&&t(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var h=new Z(f,{path:path||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(var i=0;i<this.pluginCallbacks.length;i++){var m=this.pluginCallbacks[i](h);l[m.name]=m,n[m.name]=!0}if(f.extensionsUsed)for(i=0;i<f.extensionsUsed.length;++i){var v=f.extensionsUsed[i],T=f.extensionsRequired||[];switch(v){case r.KHR_MATERIALS_UNLIT:n[v]=new d;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:n[v]=new M;break;case r.KHR_DRACO_MESH_COMPRESSION:n[v]=new R(f,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:n[v]=new c(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:n[v]=new S;break;case r.KHR_MESH_QUANTIZATION:n[v]=new A;break;default:T.indexOf(v)>=0&&void 0===l[v]&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}h.setExtensions(n),h.setPlugins(l),h.parse(e,t)}}});var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function c(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function l(e){this.parser=e,this.name=r.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function d(){this.name=r.KHR_MATERIALS_UNLIT}function f(e){this.parser=e,this.name=r.KHR_MATERIALS_CLEARCOAT}function h(e){this.parser=e,this.name=r.KHR_MATERIALS_TRANSMISSION}function m(e){this.parser=e,this.name=r.KHR_TEXTURE_BASISU}function v(e){this.parser=e,this.name=r.EXT_TEXTURE_WEBP,this.isSupported=null}function T(e){this.name=r.EXT_MESHOPT_COMPRESSION,this.parser=e}l.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],r=0,n=t.length;r<n;r++){var o=t[r];o.extensions&&o.extensions[this.name]&&void 0!==o.extensions[this.name].light&&e._addNodeRef(this.cache,o.extensions[this.name].light)}},l.prototype._loadLight=function(e){var t=this.parser,r="light:"+e,n=t.cache.get(r);if(n)return n;var c,l=t.json,d=((l.extensions&&l.extensions[this.name]||{}).lights||[])[e],f=new o.Color(16777215);void 0!==d.color&&f.fromArray(d.color);var h=void 0!==d.range?d.range:0;switch(d.type){case"directional":(c=new o.DirectionalLight(f)).target.position.set(0,0,-1),c.add(c.target);break;case"point":(c=new o.PointLight(f)).distance=h;break;case"spot":(c=new o.SpotLight(f)).distance=h,d.spot=d.spot||{},d.spot.innerConeAngle=void 0!==d.spot.innerConeAngle?d.spot.innerConeAngle:0,d.spot.outerConeAngle=void 0!==d.spot.outerConeAngle?d.spot.outerConeAngle:Math.PI/4,c.angle=d.spot.outerConeAngle,c.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+d.type+'".')}return c.position.set(0,0,0),c.decay=2,void 0!==d.intensity&&(c.intensity=d.intensity),c.name=t.createUniqueName(d.name||"light_"+e),n=Promise.resolve(c),t.cache.add(r,n),n},l.prototype.createNodeAttachment=function(e){var t=this,r=this.parser,n=r.json.nodes[e],o=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then((function(e){return r._getNodeRef(t.cache,o,e)}))},d.prototype.getMaterialType=function(){return o.MeshBasicMaterial},d.prototype.extendParams=function(e,t,r){var n=[];e.color=new o.Color(1,1,1),e.opacity=1;var c=t.pbrMetallicRoughness;if(c){if(Array.isArray(c.baseColorFactor)){var l=c.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}void 0!==c.baseColorTexture&&n.push(r.assignTexture(e,"map",c.baseColorTexture))}return Promise.all(n)},f.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.MeshPhysicalMaterial:null},f.prototype.extendMaterialParams=function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var c=[],l=n.extensions[this.name];if(void 0!==l.clearcoatFactor&&(t.clearcoat=l.clearcoatFactor),void 0!==l.clearcoatTexture&&c.push(r.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),void 0!==l.clearcoatRoughnessFactor&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),void 0!==l.clearcoatRoughnessTexture&&c.push(r.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),void 0!==l.clearcoatNormalTexture&&(c.push(r.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),void 0!==l.clearcoatNormalTexture.scale)){var d=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new o.Vector2(d,d)}return Promise.all(c)},h.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?o.MeshPhysicalMaterial:null},h.prototype.extendMaterialParams=function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var o=[],c=n.extensions[this.name];return void 0!==c.transmissionFactor&&(t.transmission=c.transmissionFactor),void 0!==c.transmissionTexture&&o.push(r.assignTexture(t,"transmissionMap",c.transmissionTexture)),Promise.all(o)},m.prototype.loadTexture=function(e){var t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var o=n.extensions[this.name],source=r.images[o.source],c=t.options.ktx2Loader;if(!c){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,source,c)},v.prototype.loadTexture=function(e){var t=this.name,r=this.parser,n=r.json,o=n.textures[e];if(!o.extensions||!o.extensions[t])return null;var c=o.extensions[t],source=n.images[c.source],l=source.uri?r.options.manager.getHandler(source.uri):r.textureLoader;return this.detectSupport().then((function(o){if(o)return r.loadTextureImage(e,source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))},v.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(e){var image=new Image;image.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",image.onload=image.onerror=function(){e(1===image.height)}}))),this.isSupported},T.prototype.loadBufferView=function(e){var t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){var n=r.extensions[this.name],o=this.parser.getDependency("buffer",n.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([o,c.ready]).then((function(e){var t=n.byteOffset||0,r=n.byteLength||0,o=n.count,l=n.byteStride,d=new ArrayBuffer(o*l),source=new Uint8Array(e[0],t,r);return c.decodeGltfBuffer(new Uint8Array(d),o,l,source,n.mode,n.filter),d}))}return null};var y="glTF",E=1313821514,_=5130562;function w(data){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(data,0,12);if(this.header={magic:o.LoaderUtils.decodeText(new Uint8Array(data.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==y)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var t=new DataView(data,12),n=0;n<t.byteLength;){var c=t.getUint32(n,!0);n+=4;var l=t.getUint32(n,!0);if(n+=4,l===E){var d=new Uint8Array(data,12+n,c);this.content=o.LoaderUtils.decodeText(d)}else if(l===_){var f=12+n;this.body=data.slice(f,f+c)}n+=c}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function R(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function S(){this.name=r.KHR_TEXTURE_TRANSFORM}function O(e){o.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),d={specular:{value:(new o.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=d,this.onBeforeCompile=function(e){for(var o in d)e.uniforms[o]=d[o];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",l)},Object.defineProperties(this,{specular:{get:function(){return d.specular.value},set:function(e){d.specular.value=e}},specularMap:{get:function(){return d.specularMap.value},set:function(e){d.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return d.glossiness.value},set:function(e){d.glossiness.value=e}},glossinessMap:{get:function(){return d.glossinessMap.value},set:function(e){d.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function M(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return O},extendParams:function(e,t,r){var n=t.extensions[this.name];e.color=new o.Color(1,1,1),e.opacity=1;var c=[];if(Array.isArray(n.diffuseFactor)){var l=n.diffuseFactor;e.color.fromArray(l),e.opacity=l[3]}if(void 0!==n.diffuseTexture&&c.push(r.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new o.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new o.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var d=n.specularGlossinessTexture;c.push(r.assignTexture(e,"glossinessMap",d)),c.push(r.assignTexture(e,"specularMap",d))}return Promise.all(c)},createMaterial:function(e){var t=new O(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=o.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function A(){this.name=r.KHR_MESH_QUANTIZATION}function L(e,t,r,n){o.Interpolant.call(this,e,t,r,n)}R.prototype.decodePrimitive=function(e,t){var r=this.json,n=this.dracoLoader,o=e.extensions[this.name].bufferView,c=e.extensions[this.name].attributes,l={},d={},f={};for(var h in c){var m=G[h]||h.toLowerCase();l[m]=c[h]}for(h in e.attributes){m=G[h]||h.toLowerCase();if(void 0!==c[h]){var v=r.accessors[e.attributes[h]],T=B[v.componentType];f[m]=T,d[m]=!0===v.normalized}}return t.getDependency("bufferView",o).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var r in e.attributes){var n=e.attributes[r],o=d[r];void 0!==o&&(n.normalized=o)}t(e)}),l,f)}))}))},S.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},O.prototype=Object.create(o.MeshStandardMaterial.prototype),O.prototype.constructor=O,O.prototype.copy=function(source){return o.MeshStandardMaterial.prototype.copy.call(this,source),this.specularMap=source.specularMap,this.specular.copy(source.specular),this.glossinessMap=source.glossinessMap,this.glossiness=source.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},L.prototype=Object.create(o.Interpolant.prototype),L.prototype.constructor=L,L.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,o=e*n*3+n,i=0;i!==n;i++)t[i]=r[o+i];return t},L.prototype.beforeStart_=L.prototype.copySampleValue_,L.prototype.afterEnd_=L.prototype.copySampleValue_,L.prototype.interpolate_=function(e,t,r,n){for(var o=this.resultBuffer,c=this.sampleValues,l=this.valueSize,d=2*l,f=3*l,td=n-t,p=(r-t)/td,h=p*p,m=h*p,v=e*f,T=v-f,y=-2*m+3*h,E=m-h,_=1-y,w=E-h+p,i=0;i!==l;i++){var R=c[T+i+l],S=c[T+i+d]*td,O=c[v+i+l],M=c[v+i]*td;o[i]=_*R+w*S+y*O+E*M}return o};var x=0,I=1,P=2,k=3,C=4,F=5,j=6,B={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},D={9728:o.NearestFilter,9729:o.LinearFilter,9984:o.NearestMipmapNearestFilter,9985:o.LinearMipmapNearestFilter,9986:o.NearestMipmapLinearFilter,9987:o.LinearMipmapLinearFilter},N={33071:o.ClampToEdgeWrapping,33648:o.MirroredRepeatWrapping,10497:o.RepeatWrapping},U={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},G={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},H={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},V={CUBICSPLINE:void 0,LINEAR:o.InterpolateLinear,STEP:o.InterpolateDiscrete},X="OPAQUE",$="MASK",K="BLEND";function W(e,path){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(path)&&/^\//.test(e)&&(path=path.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:path+e)}function z(e,object,t){for(var r in t.extensions)void 0===e[r]&&(object.userData.gltfExtensions=object.userData.gltfExtensions||{},object.userData.gltfExtensions[r]=t.extensions[r])}function Y(object,e){void 0!==e.extras&&("object"===n(e.extras)?Object.assign(object.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function J(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,r=t.weights.length;i<r;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(i=0,r=n.length;i<r;i++)e.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Q(e){for(var t="",r=Object.keys(e).sort(),i=0,n=r.length;i<n;i++)t+=r[i]+":"+e[r[i]]+";";return t}function Z(e,r){this.json=e||{},this.extensions={},this.plugins={},this.options=r||{},this.cache=new t,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new o.ImageBitmapLoader(this.options.manager):this.textureLoader=new o.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new o.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function ee(e,t,r){var n=t.attributes,c=[];function l(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var d in n){var f=G[d]||d.toLowerCase();f in e.attributes||c.push(l(n[d],f))}if(void 0!==t.indices&&!e.index){var h=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));c.push(h)}return Y(e,t),function(e,t,r){var n=t.attributes,c=new o.Box3;if(void 0!==n.POSITION){var l=(T=r.json.accessors[n.POSITION]).min,d=T.max;if(void 0!==l&&void 0!==d){c.set(new o.Vector3(l[0],l[1],l[2]),new o.Vector3(d[0],d[1],d[2]));var f=t.targets;if(void 0!==f){for(var h=new o.Vector3,m=new o.Vector3,i=0,v=f.length;i<v;i++){var T,y=f[i];if(void 0!==y.POSITION)l=(T=r.json.accessors[y.POSITION]).min,d=T.max,void 0!==l&&void 0!==d?(m.setX(Math.max(Math.abs(l[0]),Math.abs(d[0]))),m.setY(Math.max(Math.abs(l[1]),Math.abs(d[1]))),m.setZ(Math.max(Math.abs(l[2]),Math.abs(d[2]))),h.max(m)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}c.expandByVector(h)}e.boundingBox=c;var E=new o.Sphere;c.getCenter(E.center),E.radius=c.min.distanceTo(c.max)/2,e.boundingSphere=E}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,r),Promise.all(c).then((function(){return void 0!==t.targets?function(e,t,r){for(var n=!1,o=!1,i=0,c=t.length;i<c&&(void 0!==(f=t[i]).POSITION&&(n=!0),void 0!==f.NORMAL&&(o=!0),!n||!o);i++);if(!n&&!o)return Promise.resolve(e);var l=[],d=[];for(i=0,c=t.length;i<c;i++){var f=t[i];if(n){var h=void 0!==f.POSITION?r.getDependency("accessor",f.POSITION):e.attributes.position;l.push(h)}o&&(h=void 0!==f.NORMAL?r.getDependency("accessor",f.NORMAL):e.attributes.normal,d.push(h))}return Promise.all([Promise.all(l),Promise.all(d)]).then((function(t){var r=t[0],c=t[1];return n&&(e.morphAttributes.position=r),o&&(e.morphAttributes.normal=c),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}function te(e,t){var r=e.getIndex();if(null===r){var n=[],c=e.getAttribute("position");if(void 0===c)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var i=0;i<c.count;i++)n.push(i);e.setIndex(n),r=e.getIndex()}var l=r.count-2,d=[];if(t===o.TriangleFanDrawMode)for(i=1;i<=l;i++)d.push(r.getX(0)),d.push(r.getX(i)),d.push(r.getX(i+1));else for(i=0;i<l;i++)i%2==0?(d.push(r.getX(i)),d.push(r.getX(i+1)),d.push(r.getX(i+2))):(d.push(r.getX(i+2)),d.push(r.getX(i+1)),d.push(r.getX(i)));d.length/3!==l&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var f=e.clone();return f.setIndex(d),f}return Z.prototype.setExtensions=function(e){this.extensions=e},Z.prototype.setPlugins=function(e){this.plugins=e},Z.prototype.parse=function(e,t){var r=this,n=this.json,o=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var c={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};z(o,c,n),Y(c,n),e(c)})).catch(t)},Z.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n=0,o=t.length;n<o;n++)for(var c=t[n].joints,i=0,l=c.length;i<l;i++)e[c[i]].isBone=!0;for(var d=0,f=e.length;d<f;d++){var h=e[d];void 0!==h.mesh&&(this._addNodeRef(this.meshCache,h.mesh),void 0!==h.skin&&(r[h.mesh].isSkinnedMesh=!0)),void 0!==h.camera&&this._addNodeRef(this.cameraCache,h.camera)}},Z.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},Z.prototype._getNodeRef=function(e,t,object){if(e.refs[t]<=1)return object;var r=object.clone();return r.name+="_instance_"+e.uses[t]++,r},Z.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var i=0;i<t.length;i++){var r=e(t[i]);if(r)return r}},Z.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var r=[],i=0;i<t.length;i++){var n=e(t[i]);n&&r.push(n)}return r},Z.prototype.getDependency=function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n},Z.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,defs=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(defs.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t},Z.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var o=this.options;return new Promise((function(e,r){n.load(W(t.uri,o.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},Z.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))},Z.prototype.loadAccessor=function(e){var t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var c=[];return void 0!==n.bufferView?c.push(this.getDependency("bufferView",n.bufferView)):c.push(null),void 0!==n.sparse&&(c.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),c.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(c).then((function(e){var c,l,d=e[0],f=U[n.type],h=B[n.componentType],m=h.BYTES_PER_ELEMENT,v=m*f,T=n.byteOffset||0,y=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,E=!0===n.normalized;if(y&&y!==v){var _=Math.floor(T/y),w="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+_+":"+n.count,R=t.cache.get(w);R||(c=new h(d,_*y,n.count*y/m),R=new o.InterleavedBuffer(c,y/m),t.cache.add(w,R)),l=new o.InterleavedBufferAttribute(R,f,T%y/m,E)}else c=null===d?new h(n.count*f):new h(d,T,n.count*f),l=new o.BufferAttribute(c,f,E);if(void 0!==n.sparse){var S=U.SCALAR,O=B[n.sparse.indices.componentType],M=n.sparse.indices.byteOffset||0,A=n.sparse.values.byteOffset||0,L=new O(e[1],M,n.sparse.count*S),x=new h(e[2],A,n.sparse.count*f);null!==d&&(l=new o.BufferAttribute(l.array.slice(),l.itemSize,l.normalized));for(var i=0,I=L.length;i<I;i++){var P=L[i];if(l.setX(P,x[i*f]),f>=2&&l.setY(P,x[i*f+1]),f>=3&&l.setZ(P,x[i*f+2]),f>=4&&l.setW(P,x[i*f+3]),f>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return l}))},Z.prototype.loadTexture=function(e){var source,t,n=this.json,o=this.options,c=n.textures[e],l=c.extensions||{};return(source=l[r.MSFT_TEXTURE_DDS]?n.images[l[r.MSFT_TEXTURE_DDS].source]:n.images[c.source]).uri&&(t=o.manager.getHandler(source.uri)),t||(t=l[r.MSFT_TEXTURE_DDS]?this.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,source,t)},Z.prototype.loadTextureImage=function(e,source,t){var r=this,n=this.json,c=this.options,l=n.textures[e],d=self.URL||self.webkitURL,f=source.uri,h=!1,m=!0;return"image/jpeg"===source.mimeType&&(m=!1),void 0!==source.bufferView&&(f=r.getDependency("bufferView",source.bufferView).then((function(e){if("image/png"===source.mimeType){var t=new DataView(e,25,1).getUint8(0,!1);m=6===t||4===t||3===t}h=!0;var r=new Blob([e],{type:source.mimeType});return f=d.createObjectURL(r)}))),Promise.resolve(f).then((function(e){return new Promise((function(r,n){var l=r;!0===t.isImageBitmapLoader&&(l=function(e){r(new o.CanvasTexture(e))}),t.load(W(e,c.path),l,void 0,n)}))})).then((function(t){!0===h&&d.revokeObjectURL(f),t.flipY=!1,l.name&&(t.name=l.name),m||(t.format=o.RGBFormat);var c=(n.samplers||{})[l.sampler]||{};return t.magFilter=D[c.magFilter]||o.LinearFilter,t.minFilter=D[c.minFilter]||o.LinearMipmapLinearFilter,t.wrapS=N[c.wrapS]||o.RepeatWrapping,t.wrapT=N[c.wrapT]||o.RepeatWrapping,r.associations.set(t,{type:"textures",index:e}),t}))},Z.prototype.assignTexture=function(e,t,n){var o=this;return this.getDependency("texture",n.index).then((function(c){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),o.extensions[r.KHR_TEXTURE_TRANSFORM]){var l=void 0!==n.extensions?n.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;if(l){var d=o.associations.get(c);c=o.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(c,l),o.associations.set(c,d)}}e[t]=c}))},Z.prototype.assignFinalMaterial=function(e){var t=e.geometry,r=e.material,n=void 0!==t.attributes.tangent,c=void 0!==t.attributes.color,l=void 0===t.attributes.normal,d=!0===e.isSkinnedMesh,f=Object.keys(t.morphAttributes).length>0,h=f&&void 0!==t.morphAttributes.normal;if(e.isPoints){var m="PointsMaterial:"+r.uuid,v=this.cache.get(m);v||(v=new o.PointsMaterial,o.Material.prototype.copy.call(v,r),v.color.copy(r.color),v.map=r.map,v.sizeAttenuation=!1,this.cache.add(m,v)),r=v}else if(e.isLine){m="LineBasicMaterial:"+r.uuid;var T=this.cache.get(m);T||(T=new o.LineBasicMaterial,o.Material.prototype.copy.call(T,r),T.color.copy(r.color),this.cache.add(m,T)),r=T}if(n||c||l||d||f){m="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(m+="specular-glossiness:"),d&&(m+="skinning:"),n&&(m+="vertex-tangents:"),c&&(m+="vertex-colors:"),l&&(m+="flat-shading:"),f&&(m+="morph-targets:"),h&&(m+="morph-normals:");var y=this.cache.get(m);y||(y=r.clone(),d&&(y.skinning=!0),n&&(y.vertexTangents=!0),c&&(y.vertexColors=!0),l&&(y.flatShading=!0),f&&(y.morphTargets=!0),h&&(y.morphNormals=!0),this.cache.add(m,y),this.associations.set(y,this.associations.get(r))),r=y}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),r.normalScale&&!n&&(r.normalScale.y=-r.normalScale.y),r.clearcoatNormalScale&&!n&&(r.clearcoatNormalScale.y=-r.clearcoatNormalScale.y),e.material=r},Z.prototype.getMaterialType=function(){return o.MeshStandardMaterial},Z.prototype.loadMaterial=function(e){var t,n=this,c=this.json,l=this.extensions,d=c.materials[e],f={},h=d.extensions||{},m=[];if(h[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var v=l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=v.getMaterialType(),m.push(v.extendParams(f,d,n))}else if(h[r.KHR_MATERIALS_UNLIT]){var T=l[r.KHR_MATERIALS_UNLIT];t=T.getMaterialType(),m.push(T.extendParams(f,d,n))}else{var y=d.pbrMetallicRoughness||{};if(f.color=new o.Color(1,1,1),f.opacity=1,Array.isArray(y.baseColorFactor)){var E=y.baseColorFactor;f.color.fromArray(E),f.opacity=E[3]}void 0!==y.baseColorTexture&&m.push(n.assignTexture(f,"map",y.baseColorTexture)),f.metalness=void 0!==y.metallicFactor?y.metallicFactor:1,f.roughness=void 0!==y.roughnessFactor?y.roughnessFactor:1,void 0!==y.metallicRoughnessTexture&&(m.push(n.assignTexture(f,"metalnessMap",y.metallicRoughnessTexture)),m.push(n.assignTexture(f,"roughnessMap",y.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),m.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,f)}))))}!0===d.doubleSided&&(f.side=o.DoubleSide);var _=d.alphaMode||X;return _===K?(f.transparent=!0,f.depthWrite=!1):(f.transparent=!1,_===$&&(f.alphaTest=void 0!==d.alphaCutoff?d.alphaCutoff:.5)),void 0!==d.normalTexture&&t!==o.MeshBasicMaterial&&(m.push(n.assignTexture(f,"normalMap",d.normalTexture)),f.normalScale=new o.Vector2(1,1),void 0!==d.normalTexture.scale&&f.normalScale.set(d.normalTexture.scale,d.normalTexture.scale)),void 0!==d.occlusionTexture&&t!==o.MeshBasicMaterial&&(m.push(n.assignTexture(f,"aoMap",d.occlusionTexture)),void 0!==d.occlusionTexture.strength&&(f.aoMapIntensity=d.occlusionTexture.strength)),void 0!==d.emissiveFactor&&t!==o.MeshBasicMaterial&&(f.emissive=(new o.Color).fromArray(d.emissiveFactor)),void 0!==d.emissiveTexture&&t!==o.MeshBasicMaterial&&m.push(n.assignTexture(f,"emissiveMap",d.emissiveTexture)),Promise.all(m).then((function(){var c;return c=t===O?l[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(f):new t(f),d.name&&(c.name=d.name),c.map&&(c.map.encoding=o.sRGBEncoding),c.emissiveMap&&(c.emissiveMap.encoding=o.sRGBEncoding),Y(c,d),n.associations.set(c,{type:"materials",index:e}),d.extensions&&z(l,c,d),c}))},Z.prototype.createUniqueName=function(e){for(var t=o.PropertyBinding.sanitizeNodeName(e||""),i=1;this.nodeNamesUsed[t];++i)t=e+"_"+i;return this.nodeNamesUsed[t]=!0,t},Z.prototype.loadGeometries=function(e){var t=this,n=this.extensions,c=this.primitiveCache;function l(e){return n[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return ee(r,e,t)}))}for(var d,f,h=[],i=0,m=e.length;i<m;i++){var v,T=e[i],y=(f=void 0,(f=(d=T).extensions&&d.extensions[r.KHR_DRACO_MESH_COMPRESSION])?"draco:"+f.bufferView+":"+f.indices+":"+Q(f.attributes):d.indices+":"+Q(d.attributes)+":"+d.mode),E=c[y];if(E)h.push(E.promise);else v=T.extensions&&T.extensions[r.KHR_DRACO_MESH_COMPRESSION]?l(T):ee(new o.BufferGeometry,T,t),c[y]={primitive:T,promise:v},h.push(v)}return Promise.all(h)},Z.prototype.loadMesh=function(e){for(var t,r=this,n=this.json.meshes[e],c=n.primitives,l=[],i=0,d=c.length;i<d;i++){var f=void 0===c[i].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new o.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o.FrontSide})),t.DefaultMaterial):this.getDependency("material",c[i].material);l.push(f)}return l.push(r.loadGeometries(c)),Promise.all(l).then((function(t){for(var l=t.slice(0,t.length-1),d=t[t.length-1],f=[],i=0,h=d.length;i<h;i++){var m,v=d[i],T=c[i],y=l[i];if(T.mode===C||T.mode===F||T.mode===j||void 0===T.mode)!0!==(m=!0===n.isSkinnedMesh?new o.SkinnedMesh(v,y):new o.Mesh(v,y)).isSkinnedMesh||m.geometry.attributes.skinWeight.normalized||m.normalizeSkinWeights(),T.mode===F?m.geometry=te(m.geometry,o.TriangleStripDrawMode):T.mode===j&&(m.geometry=te(m.geometry,o.TriangleFanDrawMode));else if(T.mode===I)m=new o.LineSegments(v,y);else if(T.mode===k)m=new o.Line(v,y);else if(T.mode===P)m=new o.LineLoop(v,y);else{if(T.mode!==x)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);m=new o.Points(v,y)}Object.keys(m.geometry.morphAttributes).length>0&&J(m,n),m.name=r.createUniqueName(n.name||"mesh_"+e),Y(m,n),r.assignFinalMaterial(m),f.push(m)}if(1===f.length)return f[0];var E=new o.Group;for(i=0,h=f.length;i<h;i++)E.add(f[i]);return E}))},Z.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new o.PerspectiveCamera(o.MathUtils.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new o.OrthographicCamera(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Y(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Z.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))},Z.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],r=[],n=[],c=[],l=[],d=[],i=0,f=t.channels.length;i<f;i++){var h=t.channels[i],m=t.samplers[h.sampler],v=h.target,T=void 0!==v.node?v.node:v.id,input=void 0!==t.parameters?t.parameters[m.input]:m.input,output=void 0!==t.parameters?t.parameters[m.output]:m.output;r.push(this.getDependency("node",T)),n.push(this.getDependency("accessor",input)),c.push(this.getDependency("accessor",output)),l.push(m),d.push(v)}return Promise.all([Promise.all(r),Promise.all(n),Promise.all(c),Promise.all(l),Promise.all(d)]).then((function(r){for(var n=r[0],c=r[1],l=r[2],d=r[3],f=r[4],h=[],i=0,m=n.length;i<m;i++){var v=n[i],T=c[i],y=l[i],E=d[i],_=f[i];if(void 0!==v){var w;switch(v.updateMatrix(),v.matrixAutoUpdate=!0,H[_.path]){case H.weights:w=o.NumberKeyframeTrack;break;case H.rotation:w=o.QuaternionKeyframeTrack;break;case H.position:case H.scale:default:w=o.VectorKeyframeTrack}var R=v.name?v.name:v.uuid,S=void 0!==E.interpolation?V[E.interpolation]:o.InterpolateLinear,O=[];H[_.path]===H.weights?v.traverse((function(object){!0===object.isMesh&&object.morphTargetInfluences&&O.push(object.name?object.name:object.uuid)})):O.push(R);var M=y.array;if(y.normalized){var A;if(M.constructor===Int8Array)A=1/127;else if(M.constructor===Uint8Array)A=1/255;else if(M.constructor==Int16Array)A=1/32767;else{if(M.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");A=1/65535}for(var x=new Float32Array(M.length),I=0,P=M.length;I<P;I++)x[I]=M[I]*A;M=x}for(I=0,P=O.length;I<P;I++){var track=new w(O[I]+"."+H[_.path],T.array,M,S);"CUBICSPLINE"===E.interpolation&&(track.createInterpolant=function(e){return new L(this.times,this.values,this.getValueSize()/3,e)},track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),h.push(track)}}}var k=t.name?t.name:"animation_"+e;return new o.AnimationClip(k,void 0,h)}))},Z.prototype.loadNode=function(e){var t,r=this.json,n=this.extensions,c=this,l=r.nodes[e],d=l.name?c.createUniqueName(l.name):"";return(t=[],void 0!==l.mesh&&t.push(c.getDependency("mesh",l.mesh).then((function(e){var t=c._getNodeRef(c.meshCache,l.mesh,e);return void 0!==l.weights&&t.traverse((function(e){if(e.isMesh)for(var i=0,t=l.weights.length;i<t;i++)e.morphTargetInfluences[i]=l.weights[i]})),t}))),void 0!==l.camera&&t.push(c.getDependency("camera",l.camera).then((function(e){return c._getNodeRef(c.cameraCache,l.camera,e)}))),c._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)).then((function(t){var r;if((r=!0===l.isBone?new o.Bone:t.length>1?new o.Group:1===t.length?t[0]:new o.Object3D)!==t[0])for(var i=0,f=t.length;i<f;i++)r.add(t[i]);if(l.name&&(r.userData.name=l.name,r.name=d),Y(r,l),l.extensions&&z(n,r,l),void 0!==l.matrix){var h=new o.Matrix4;h.fromArray(l.matrix),r.applyMatrix4(h)}else void 0!==l.translation&&r.position.fromArray(l.translation),void 0!==l.rotation&&r.quaternion.fromArray(l.rotation),void 0!==l.scale&&r.scale.fromArray(l.scale);return c.associations.set(r,{type:"nodes",index:e}),r}))},Z.prototype.loadScene=function(){function e(t,r,n,c){var l=n.nodes[t];return c.getDependency("node",t).then((function(e){return void 0===l.skin?e:c.getDependency("skin",l.skin).then((function(e){for(var r=[],i=0,n=(t=e).joints.length;i<n;i++)r.push(c.getDependency("node",t.joints[i]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(e.isMesh){for(var n=[],c=[],l=0,d=r.length;l<d;l++){var f=r[l];if(f){n.push(f);var h=new o.Matrix4;void 0!==t.inverseBindMatrices&&h.fromArray(t.inverseBindMatrices.array,16*l),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}e.bind(new o.Skeleton(n,c),e.matrixWorld)}})),e}));var t})).then((function(t){r.add(t);var o=[];if(l.children)for(var d=l.children,i=0,f=d.length;i<f;i++){var h=d[i];o.push(e(h,t,n,c))}return Promise.all(o)}))}return function(t){var r=this.json,n=this.extensions,c=this.json.scenes[t],l=new o.Group;c.name&&(l.name=this.createUniqueName(c.name)),Y(l,c),c.extensions&&z(n,l,c);for(var d=c.nodes||[],f=[],i=0,h=d.length;i<h;i++)f.push(e(d[i],l,r,this));return Promise.all(f).then((function(){return l}))}}(),e}()},1003:function(e,t,r){var n=r(193);r(42),r(25),r(32),r(33),r(84),r(54),r(109),r(47),r(396),r(795),r(654),r(655),r(656),r(657),r(658),r(659),r(660),r(661),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(675),r(676),r(35),r(798),r(771),r(796),r(797),r(677),r(770),r(168),r(169);var o=window.THREE=r(610);o.DRACOLoader=function(e){o.Loader.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}},o.DRACOLoader.prototype=Object.assign(Object.create(o.Loader.prototype),{constructor:o.DRACOLoader,setDecoderPath:function(path){return this.decoderPath=path,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,r,n){var c=this,l=new o.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(e){var r={attributeIDs:c.defaultAttributeIDs,attributeTypes:c.defaultAttributeTypes,useUniqueIDs:!1};c.decodeGeometry(e,r).then(t).catch(n)}),r,n)},decodeDracoFile:function(e,t,r,n){var o={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,o).then(t)},decodeGeometry:function(e,t){var r=this;for(var n in t.attributeTypes){var c=t.attributeTypes[n];void 0!==c.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=c.name)}var l,d=JSON.stringify(t);if(o.DRACOLoader.taskCache.has(e)){var f=o.DRACOLoader.taskCache.get(e);if(f.key===d)return f.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var h=this.workerNextTaskID++,m=e.byteLength,v=this._getWorker(h,m).then((function(r){return l=r,new Promise((function(r,n){l._callbacks[h]={resolve:r,reject:n},l.postMessage({type:"decode",id:h,taskConfig:t,buffer:e},[e])}))})).then((function(e){return r._createGeometry(e.geometry)}));return v.catch((function(){return!0})).then((function(){l&&h&&r._releaseTask(l,h)})),o.DRACOLoader.taskCache.set(e,{key:d,promise:v}),v},_createGeometry:function(e){var t=new o.BufferGeometry;e.index&&t.setIndex(new o.BufferAttribute(e.index.array,1));for(var i=0;i<e.attributes.length;i++){var r=e.attributes[i],n=r.name,c=r.array,l=r.itemSize;t.setAttribute(n,new o.BufferAttribute(c,l))}return t},_loadLibrary:function(e,t){var r=new o.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((function(t,n){r.load(e,t,void 0,n)}))},preload:function(){return this._initDecoder(),this},_initDecoder:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==("undefined"==typeof WebAssembly?"undefined":n(WebAssembly))||"js"===this.decoderConfig.type,r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then((function(r){var n=r[0];t||(e.decoderConfig.wasmBinary=r[1]);var c=o.DRACOLoader.DRACOWorker.toString(),body=["/* draco decoder */",n,"","/* worker */",c.substring(c.indexOf("{")+1,c.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([body]))})),this.decoderPending},_getWorker:function(e,t){var r=this;return this._initDecoder().then((function(){var n;r.workerPool.length<r.workerLimit?((n=new Worker(r.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:r.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},r.workerPool.push(n)):r.workerPool.sort((function(a,b){return a._taskLoad>b._taskLoad?-1:1}));return(n=r.workerPool[r.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n}))},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))},dispose:function(){for(var i=0;i<this.workerPool.length;++i)this.workerPool[i].terminate();return this.workerPool.length=0,this}}),o.DRACOLoader.DRACOWorker=function(){var e,t;function r(e,t,r,n,o,c){var l=c.num_components(),d=r.num_points()*l,f=d*o.BYTES_PER_ELEMENT,h=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,o),m=e._malloc(f);t.GetAttributeDataArrayForAllPoints(r,c,h,f,m);var v=new o(e.HEAPF32.buffer,m,d).slice();return e._free(m),{name:n,array:v,itemSize:l}}onmessage=function(n){var o=n.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var c=o.buffer,l=o.taskConfig;t.then((function(e){var t=e.draco,n=new t.Decoder,d=new t.DecoderBuffer;d.Init(new Int8Array(c),c.byteLength);try{var f=function(e,t,n,o){var c,l,d=o.attributeIDs,f=o.attributeTypes,h=t.GetEncodedGeometryType(n);if(h===e.TRIANGULAR_MESH)c=new e.Mesh,l=t.DecodeBufferToMesh(n,c);else{if(h!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");c=new e.PointCloud,l=t.DecodeBufferToPointCloud(n,c)}if(!l.ok()||0===c.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());var m={index:null,attributes:[]};for(var v in d){var T,y,E=self[f[v]];if(o.useUniqueIDs)y=d[v],T=t.GetAttributeByUniqueId(c,y);else{if(-1===(y=t.GetAttributeId(c,e[d[v]])))continue;T=t.GetAttribute(c,y)}m.attributes.push(r(e,t,c,v,E,T))}h===e.TRIANGULAR_MESH&&(m.index=function(e,t,r){var n=3*r.num_faces(),o=4*n,c=e._malloc(o);t.GetTrianglesUInt32Array(r,o,c);var l=new Uint32Array(e.HEAPF32.buffer,c,n).slice();return e._free(c),{array:l,itemSize:1}}(e,t,c));return e.destroy(c),m}(t,n,d,l),h=f.attributes.map((function(e){return e.array.buffer}));f.index&&h.push(f.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:f},h)}catch(e){console.error(e),self.postMessage({type:"error",id:o.id,error:e.message})}finally{t.destroy(d),t.destroy(n)}}))}}},o.DRACOLoader.taskCache=new WeakMap,o.DRACOLoader.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},o.DRACOLoader.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},o.DRACOLoader.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},o.DRACOLoader.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},1004:function(e,t,r){(function(e){var t=r(440);r(25),r(32),r(168),r(169),r(33),r(84),r(54),r(109),r(396),r(677),r(654),r(655),r(656),r(657),r(658),r(659),r(660),r(661),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(675),r(676),e.BasisTextureLoader=function(t){e.Loader.call(this,t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1}},e.BasisTextureLoader.taskCache=new WeakMap,e.BasisTextureLoader.prototype=Object.assign(Object.create(e.Loader.prototype),{constructor:e.BasisTextureLoader,setTranscoderPath:function(path){return this.transcoderPath=path,this},setWorkerLimit:function(e){return this.workerLimit=e,this},detectSupport:function(t){var r=this.workerConfig;if(r.astcSupported=t.extensions.has("WEBGL_compressed_texture_astc"),r.bptcSupported=t.extensions.has("EXT_texture_compression_bptc"),r.etcSupported=t.extensions.has("WEBGL_compressed_texture_etc1"),r.dxtSupported=t.extensions.has("WEBGL_compressed_texture_s3tc"),r.pvrtcSupported=t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc"),r.astcSupported)r.format=e.BasisTextureLoader.BASIS_FORMAT.cTFASTC_4x4;else if(r.bptcSupported)r.format=e.BasisTextureLoader.BASIS_FORMAT.cTFBC7_M5;else if(r.dxtSupported)r.format=e.BasisTextureLoader.BASIS_FORMAT.cTFBC3;else if(r.pvrtcSupported)r.format=e.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!r.etcSupported)throw new Error("THREE.BasisTextureLoader: No suitable compressed texture format found.");r.format=e.BasisTextureLoader.BASIS_FORMAT.cTFETC1}return this},load:function(t,r,n,o){var c=this,l=new e.FileLoader(this.manager);l.setResponseType("arraybuffer"),l.setWithCredentials(this.withCredentials),l.load(t,(function(n){if(e.BasisTextureLoader.taskCache.has(n))return e.BasisTextureLoader.taskCache.get(n).promise.then(r).catch(o);c._createTexture(n,t).then(r).catch(o)}),n,o)},_createTexture:function(t,r){var n,o,c=this,l=t.byteLength,d=this._allocateWorker(l).then((function(e){return n=e,o=c.workerNextTaskID++,new Promise((function(e,r){n._callbacks[o]={resolve:e,reject:r},n.postMessage({type:"transcode",id:o,buffer:t},[t])}))})).then((function(t){var r,n=c.workerConfig,o=t.width,l=t.height,d=t.mipmaps;switch(t.format){case e.BasisTextureLoader.BASIS_FORMAT.cTFASTC_4x4:r=new e.CompressedTexture(d,o,l,e.RGBA_ASTC_4x4_Format);break;case e.BasisTextureLoader.BASIS_FORMAT.cTFBC7_M5:r=new e.CompressedTexture(d,o,l,e.RGBA_BPTC_Format);break;case e.BasisTextureLoader.BASIS_FORMAT.cTFBC1:case e.BasisTextureLoader.BASIS_FORMAT.cTFBC3:r=new e.CompressedTexture(d,o,l,e.BasisTextureLoader.DXT_FORMAT_MAP[n.format],e.UnsignedByteType);break;case e.BasisTextureLoader.BASIS_FORMAT.cTFETC1:r=new e.CompressedTexture(d,o,l,e.RGB_ETC1_Format);break;case e.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGB:r=new e.CompressedTexture(d,o,l,e.RGB_PVRTC_4BPPV1_Format);break;case e.BasisTextureLoader.BASIS_FORMAT.cTFPVRTC1_4_RGBA:r=new e.CompressedTexture(d,o,l,e.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("THREE.BasisTextureLoader: No supported format available.")}return r.minFilter=1===d.length?e.LinearFilter:e.LinearMipmapLinearFilter,r.magFilter=e.LinearFilter,r.generateMipmaps=!1,r.needsUpdate=!0,r}));return d.catch((function(){return!0})).then((function(){n&&o&&(n._taskLoad-=l,delete n._callbacks[o])})),e.BasisTextureLoader.taskCache.set(t,{url:r,promise:d}),d},_initTranscoder:function(){var r=this;if(!this.transcoderPending){var n=new e.FileLoader(this.manager);n.setPath(this.transcoderPath),n.setWithCredentials(this.withCredentials);var o=new Promise((function(e,t){n.load("basis_transcoder.js",e,void 0,t)})),c=new e.FileLoader(this.manager);c.setPath(this.transcoderPath),c.setResponseType("arraybuffer"),c.setWithCredentials(this.withCredentials);var l=new Promise((function(e,t){c.load("basis_transcoder.wasm",e,void 0,t)}));this.transcoderPending=Promise.all([o,l]).then((function(n){var o=t(n,2),c=o[0],l=o[1],d=e.BasisTextureLoader.BasisWorker.toString(),body=["/* basis_transcoder.js */",c,"/* worker */",d.substring(d.indexOf("{")+1,d.lastIndexOf("}"))].join("\n");r.workerSourceURL=URL.createObjectURL(new Blob([body])),r.transcoderBinary=l}))}return this.transcoderPending},_allocateWorker:function(e){var t=this;return this._initTranscoder().then((function(){var r;t.workerPool.length<t.workerLimit?((r=new Worker(t.workerSourceURL))._callbacks={},r._taskLoad=0,r.postMessage({type:"init",config:t.workerConfig,transcoderBinary:t.transcoderBinary}),r.onmessage=function(e){var t=e.data;switch(t.type){case"transcode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+t.type+'"')}},t.workerPool.push(r)):t.workerPool.sort((function(a,b){return a._taskLoad>b._taskLoad?-1:1}));return(r=t.workerPool[t.workerPool.length-1])._taskLoad+=e,r}))},dispose:function(){for(var i=0;i<this.workerPool.length;i++)this.workerPool[i].terminate();return this.workerPool.length=0,this}}),e.BasisTextureLoader.BASIS_FORMAT={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},e.BasisTextureLoader.DXT_FORMAT={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},e.BasisTextureLoader.DXT_FORMAT_MAP={},e.BasisTextureLoader.DXT_FORMAT_MAP[e.BasisTextureLoader.BASIS_FORMAT.cTFBC1]=e.BasisTextureLoader.DXT_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT,e.BasisTextureLoader.DXT_FORMAT_MAP[e.BasisTextureLoader.BASIS_FORMAT.cTFBC3]=e.BasisTextureLoader.DXT_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT,e.BasisTextureLoader.BasisWorker=function(){var e,t,r;onmessage=function(n){var o,c,l=n.data;switch(l.type){case"init":e=l.config,o=l.transcoderBinary,t=new Promise((function(e){c={wasmBinary:o,onRuntimeInitialized:e},BASIS(c)})).then((function(){var e=c,t=e.BasisFile,n=e.initializeBasis;r=t,n()}));break;case"transcode":t.then((function(){try{for(var t=function(t){var n=new r(new Uint8Array(t)),o=n.getImageWidth(0,0),c=n.getImageHeight(0,0),l=n.getNumLevels(0),d=n.getHasAlpha();function f(){n.close(),n.delete()}if(!d)switch(e.format){case 9:e.format=8}if(!o||!c||!l)throw f(),new Error("THREE.BasisTextureLoader:\tInvalid .basis file");if(!n.startTranscoding())throw f(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");for(var h=[],m=0;m<l;m++){var v=n.getImageWidth(0,m),T=n.getImageHeight(0,m),y=new Uint8Array(n.getImageTranscodedSizeInBytes(0,m,e.format));if(!n.transcodeImage(y,0,m,e.format,0,d))throw f(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");h.push({data:y,width:v,height:T})}return f(),{width:o,height:c,hasAlpha:d,mipmaps:h,format:e.format}}(l.buffer),n=t.width,o=t.height,c=t.hasAlpha,d=t.mipmaps,f=t.format,h=[],i=0;i<d.length;++i)h.push(d[i].data.buffer);self.postMessage({type:"transcode",id:l.id,width:n,height:o,hasAlpha:c,mipmaps:d,format:f},h)}catch(e){console.error(e),self.postMessage({type:"error",id:l.id,error:e.message})}}))}}}}).call(this,r(610))},1005:function(e,t,r){r(396),r(25),r(770),r(654),r(655),r(656),r(657),r(658),r(659),r(660),r(661),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(675),r(676),r(35),r(31),r(78),r(677),r(771),r(797);var n=window.THREE=r(610);n.RGBELoader=function(e){n.DataTextureLoader.call(this,e),this.type=n.UnsignedByteType},n.RGBELoader.prototype=Object.assign(Object.create(n.DataTextureLoader.prototype),{constructor:n.RGBELoader,parse:function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;for(var p=e.pos,i=-1,n=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(p,p+128)));0>(i=o.indexOf("\n"))&&n<t&&p<e.byteLength;)s+=o,n+=o.length,p+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(p,p+128)));return-1<i&&(!1!==r&&(e.pos+=n+i+1),s+o.slice(0,i))},o=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function r(r){e[0]=r;var n=t[0],o=n>>16&32768,c=n>>12&2047,l=n>>23&255;return l<103?o:l>142?(o|=31744,o|=(255==l?0:1)&&8388607&n):l<113?o|=((c|=2048)>>114-l)+(c>>113-l&1):(o|=l-112<<10|c>>1,o+=1&c)}return function(e,t,n,o){var c=e[t+3],l=Math.pow(2,c-128)/255;n[o+0]=r(e[t+0]*l),n[o+1]=r(e[t+1]*l),n[o+2]=r(e[t+2]*l)}}(),c=new Uint8Array(e);c.pos=0;var l,d,f,h,m,v,T=function(e){var line,n,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,c=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*FORMAT=(\S+)\s*$/,d=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,header={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(line=r(e)))return t(1,"no header found");if(!(n=line.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(header.valid|=1,header.programtype=n[1],header.string+=line+"\n";!1!==(line=r(e));)if(header.string+=line+"\n","#"!==line.charAt(0)){if((n=line.match(o))&&(header.gamma=parseFloat(n[1],10)),(n=line.match(c))&&(header.exposure=parseFloat(n[1],10)),(n=line.match(l))&&(header.valid|=2,header.format=n[1]),(n=line.match(d))&&(header.valid|=4,header.height=parseInt(n[1],10),header.width=parseInt(n[2],10)),2&header.valid&&4&header.valid)break}else header.comments+=line+"\n";return 2&header.valid?4&header.valid?header:t(3,"missing image size specifier"):t(3,"missing format specifier")}(c);if(-1!==T){var y=T.width,E=T.height,_=function(e,r,n){var o,c,l,d,f,h,m,v,i,T,y,E,_,w=r,R=n;if(w<8||w>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(w!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(o=new Uint8Array(4*r*n)).length)return t(4,"unable to allocate buffer space");for(c=0,l=0,v=4*w,_=new Uint8Array(4),h=new Uint8Array(v);R>0&&l<e.byteLength;){if(l+4>e.byteLength)return t(1);if(_[0]=e[l++],_[1]=e[l++],_[2]=e[l++],_[3]=e[l++],2!=_[0]||2!=_[1]||(_[2]<<8|_[3])!=w)return t(3,"bad rgbe scanline format");for(m=0;m<v&&l<e.byteLength;){if((E=(d=e[l++])>128)&&(d-=128),0===d||m+d>v)return t(3,"bad scanline data");if(E)for(f=e[l++],i=0;i<d;i++)h[m++]=f;else h.set(e.subarray(l,l+d),m),m+=d,l+=d}for(T=w,i=0;i<T;i++)y=0,o[c]=h[i+y],y+=w,o[c+1]=h[i+y],y+=w,o[c+2]=h[i+y],y+=w,o[c+3]=h[i+y],c+=4;R--}return o}(c.subarray(c.pos),y,E);if(-1!==_){switch(this.type){case n.UnsignedByteType:var data=_,w=n.RGBEFormat,R=n.UnsignedByteType;break;case n.FloatType:for(var S=_.length/4*3,O=new Float32Array(S),M=0;M<S;M++)f=O,h=3*M,m=void 0,v=void 0,m=(l=_)[(d=4*M)+3],v=Math.pow(2,m-128)/255,f[h+0]=l[d+0]*v,f[h+1]=l[d+1]*v,f[h+2]=l[d+2]*v;data=O,w=n.RGBFormat,R=n.FloatType;break;case n.HalfFloatType:S=_.length/4*3;var A=new Uint16Array(S);for(M=0;M<S;M++)o(_,4*M,A,3*M);data=A,w=n.RGBFormat,R=n.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:y,height:E,data:data,header:T.string,gamma:T.gamma,exposure:T.exposure,format:w,type:R}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,t,r,o){return n.DataTextureLoader.prototype.load.call(this,e,(function(e,r){switch(e.type){case n.UnsignedByteType:e.encoding=n.RGBEEncoding,e.minFilter=n.NearestFilter,e.magFilter=n.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case n.FloatType:case n.HalfFloatType:e.encoding=n.LinearEncoding,e.minFilter=n.LinearFilter,e.magFilter=n.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)}),r,o)}})},1006:function(e,t,r){"use strict";var n=r(41),o=(r(25),new function e(){Object(n.a)(this,e),this.load_font_item=function(e,t){return new Promise((function(t,r){var n=new FontFace(e.id,e.url,e.options);n.load().then((function(){document.fonts.add(n),t()}))}))}});t.a=o},1007:function(e,t,r){"use strict";var n=r(45),o=r(41),c=r(71),l=(r(25),r(263),r(35),r(396),r(677),r(654),r(655),r(656),r(657),r(658),r(659),r(660),r(661),r(662),r(663),r(664),r(665),r(666),r(667),r(668),r(669),r(670),r(671),r(672),r(673),r(674),r(675),r(676),r(32),r(33),r(109),r(192),new(function(){function e(){var t=this;Object(o.a)(this,e),this.load_video_item=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(c){o=o||document.createElement("video");for(var l=0,d=Object.entries(e.options.attributes);l<d.length;l++){var f=Object(n.a)(d[l],2),h=f[0],m=f[1];m&&o.setAttribute(h,m)}t.loadBlob(e.url,r).then((function(e){o.src=e,t._fixIOSVideo(o),c(o)}))}))},this.loadBuffer=function(e,t){},this.loadBlob=function(e,t){return new Promise((function(r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=new FileReader;e.onloadend=function(){for(var t=atob(e.result.slice(e.result.indexOf(",")+1)),n=new Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);var o=new Uint8Array(n),c=new Blob([o],{type:"video/mp4"}),l=URL.createObjectURL(c);r(l)},e.readAsDataURL(n.response)},n.open("GET",e),n.onerror=function(e){console.log("** An error occurred during the transaction - ",e)},n.onprogress=function(r){var progress=r.loaded/r.total;console.log("video xhr loading",progress.toFixed(2),e),t&&t(r)},n.send()}))}}return Object(c.a)(e,[{key:"_fixIOSVideo",value:function(e){e.play().then((function(){e.pause()}),(function(t){e.pause()}))}}]),e}()));t.a=l},1108:function(e,t,r){"use strict";var n=r(4),o=r(41),c=(r(25),r(17),r(14),r(18),r(20),r(9),r(21),r(892),r(71)),l=r(270),d=r(153),f=r(258),h=r(132),m=r(24),v=r(89),T={LOAD:"load",END:"end",PLAY:"play",PAUSE:"pause",STATE:"state"},y=function e(){var t=this;Object(o.a)(this,e),this.bindEvents=function(){var e=function(e){var r=t.Events[e];(window.Howler&&"object"===Object(m.a)(t.obj["_on".concat(r)])||!window.Howler)&&t.obj.on(r,(function(s){t.emit(r,s)}))};for(var r in t.Events)e(r)},Object.assign(this,v.a,{Events:T})},E=r(999);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}window.Howler=E.Howler;var S=function(e){Object(d.a)(r,e);var t=R(r);function r(e){var n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{concurrent:1,interrupt:!1,onload:onload,sprite:{}};Object(o.a)(this,r),(n=t.call(this)).play=function(e){void 0===e&&(e={}),n.obj&&(n.interrupt&&n.obj.stop(),e.playbackRate&&n.obj.rate(e.playbackRate),n.obj.play(e.id))},n.pause=function(){n.obj.pause(n.currentId)},n.stop=function(){n.obj.stop(n.currentId)},n.fade=function(e,t){n.obj.fade(n.volume,e,t)},n.fadeOutToStop=function(e){n.obj.fade(n.volume,0,e),n.obj.once("fade",(function(){n.obj.stop()}))},n.fadeOutToPause=function(e){n.obj.fade(n.volume,0,e),n.obj.once("fade",(function(){n.obj.pause()}))};var d=function(){"function"==typeof c.onload&&c.onload.call(Object(l.a)(n))};return n.obj=new E.Howl(w(w({src:[e]},c),{},{onload:d})),n.interrupt=c.interrupt,n.bindEvents(),n}return Object(c.a)(r,[{key:"load",value:function(){var e=this;return new Promise((function(t){e.obj.once("load",t),e.obj.load()}))}},{key:"destroy",value:function(){this.obj.unload()}},{key:"volume",get:function(){return this.obj.volume(this.currentId)},set:function(e){this.obj.volume(e)}},{key:"muted",get:function(){return this.obj.muted},set:function(e){this.obj.mute(e,this.currentId)}},{key:"currentTime",get:function(){return this.obj.seek()},set:function(e){this.obj.seek(e,this.currentId)}},{key:"duration",get:function(){return this.obj.duration()}},{key:"paused",get:function(){return!this.obj.playing()}},{key:"rate",get:function(){return this.obj.rate()},set:function(e){this.obj.rate(e)}},{key:"loop",get:function(){return this.obj.loop()},set:function(e){this.obj.loop(e)}}]),r}(y);function O(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function M(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var A=new function e(){Object(o.a)(this,e),this.load_audio_url=function(e,t){return new Promise((function(t){new S(e.url,M(M({},e.options),{},{onload:function(){t(this)}}))}))},this.sounds=[]};t.a=A},1111:function(e,t,r){"use strict";r.r(t);r(14),r(18),r(20),r(21);var n=r(4),o=r(8),c=(r(39),r(35),r(28),r(9),r(17),r(12)),l=r(48),d=r(769),f=r(11),h=r(331),m=r(41),v=r(71),T=(r(25),r(891),r(42),r(63),r(32),r(52),r(58),r(33),r(89)),y={EMPTY:"empty"},E=function(){function e(t){var r=this;Object(m.a)(this,e),this.next=function(){if(!(r.pending>=r.concurrency)){var e=r.queue.shift();e?(r.pending++,e().then((function(){r.pending--,r.next()}))):r.emit(y.EMPTY)}},Object.assign(this,T.a),this.concurrency=t||1/0,this.pending=0,this.queue=[]}return Object(v.a)(e,[{key:"add",value:function(e){this.queue.push(e),this.next()}}]),e}();E.Events=y;var _=E,w=r(978),R={ITEM_COMPLETE:"ITEM_COMPLETE",ITEM_PROGRESS:"ITEM_PROGRESS"},S=function(){function e(t){var r=this;if(Object(m.a)(this,e),this.loadItem=function(){return new Promise((function(e,t){if(r.asset&&e(),!r.started){var n=w.b[r.type];r.started=!0;var o=n.argIsItem?r:r.url;n.loader(o,r.onLoadProgess).then((function(t){r._setComplete(t),e()}))}}))},this.onLoadProgess=function(e){r.loadedBytes=e.loaded,r.totalBytes=e.total||1.1*e.loaded,r.emit(R.ITEM_PROGRESS,r)},this._setComplete=function(e){r.asset=e,r.complete=!0,w.b[r.type].processor(r,e),r.emit(R.ITEM_COMPLETE,r)},Object.assign(this,T.a),this.constructor.isViableItem(t,!0)){var n="string"==typeof t?t:t.url||t.id,o=t.type||Object(w.c)(n);this.url=n,this.id=t.id||n,this.type=o,this.options=t.options||void 0,this.asset=null,this.totalBytes=1,this.loadedBytes=0,this.queued=!1,this.started=!1,this.complete=!1}}return Object(v.a)(e,[{key:"EVENTS",get:function(){return R}},{key:"progress",get:function(){return this.complete?1:this.loadedBytes/this.totalBytes}}],[{key:"EVENTS",get:function(){return R}},{key:"getItemId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="string"==typeof e?e:e.id||e.url;return!r&&t&&console.error("no id provided in manifest item:",e),r}},{key:"isViableItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="string"==typeof e?e:e.url||e.id;if(!r)return t&&console.error("no url provided in manifest item:",e),!1;var n=e.type||Object(w.c)(r);return!(!n||!w.a[n])||(t&&console.log("manifest item has unsupported type. check supported asset types. item:",e),!1)}}]),e}(),O=S,M=r(74),A=(r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(105));function L(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var I={MANIFEST_COMPLETE:"MANIFEST_COMPLETE",MANIFEST_PROGRESS:"MANIFEST_PROGRESS"},P=function(){function e(t,r){var n=this;Object(m.a)(this,e),this.onItemComplete=function(e){n.calcProgress()},this.multiAssetService=r,Object.assign(this,T.a),Object.assign(this,A.a),this.id=t.id,this.original_manifest=t,this.complete=!1,this._progress=0;var o=this._getFlats(t),c=o.items,l=o.itemIds,d=o.manifestIds;this.flat={items:c,itemIds:l,manifestIds:d},this.flat.items.forEach((function(e,i,a){e.on(O.EVENTS.ITEM_COMPLETE,n.onItemComplete)})),this.calcProgress()}return Object(v.a)(e,[{key:"EVENTS",get:function(){return I}},{key:"calcProgress",value:function(){if(!this.complete){for(var p=0,a=this.flat.items,e=a.length,i=0;i<e;i++)p+=a[i].progress;this.progress=p/e}}},{key:"progress",get:function(){return this._progress},set:function(e){var t=this._progress;this._progress=e,this.progress!==t&&this.emit(I.MANIFEST_PROGRESS,this),1===this.progress&&this._setComplete()}},{key:"_setComplete",value:function(){this.complete=!0,this.emit(I.MANIFEST_COMPLETE,this)}},{key:"uniqBy",value:function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var t=new Set;return a.filter((function(r){var n=r[e];return!t.has(n)&&t.add(n)}))}return Object(M.a)(new Set(a))}},{key:"_getFlats",value:function(e){var t,r={items:[],itemIds:[],manifestIds:[]},n=L(e.items);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.items){var c=this.multiAssetService._registerManifest(o);r.items=r.items.concat(c.flat.items),r.itemIds=r.itemIds.concat(c.flat.itemIds),r.manifestIds.push(o.id),r.manifestIds=r.manifestIds.concat(c.flat.manifestIds)}else{var l=O.getItemId(o);l&&(this.multiAssetService.getItem(l)||this.multiAssetService._registerItem(o),r.items.push(this.multiAssetService.getItem(l)),r.itemIds.push(l))}}}catch(e){n.e(e)}finally{n.f()}return r.items=this.uniqBy(r.items,"id"),r.itemIds=this.uniqBy(r.itemIds),r.manifestIds=this.uniqBy(r.manifestIds),r}}],[{key:"EVENTS",get:function(){return I}},{key:"isViableManifest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(e.id&&e.items&&e.items.length>0)){if(t)throw new Error("malformed manifest:",e);return!1}return!0}}]),e}();function k(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var F={ITEM_COMPLETE:"ITEM_COMPLETE",ITEM_PROGRESS:"ITEM_PROGRESS",MANIFEST_COMPLETE:"MANIFEST_COMPLETE",MANIFEST_PROGRESS:"MANIFEST_PROGRESS"},j=new(function(){function e(){var t=this;Object(m.a)(this,e),this.loadManifest=function(e){return e=t._registerManifest(e),new Promise((function(r,n){if(!e.flat.items.length)return e.complete=!0,void r();var o,c=t.subscribeManifestLoaded(e,(function(){c&&c(),r()})),l=k(e.flat.items);try{for(l.s();!(o=l.n()).done;){var d=o.value;t._queueItem(d)}}catch(e){l.e(e)}finally{l.f()}}))},this.loadItem=function(data){return new Promise((function(e,r){t.assets[data.id]&&e(t.assets[data.id]);var n=t._registerItem(data);n.queued=!0,t.queue.add(Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t._loadItem(n);case 2:e(n);case 3:case"end":return r.stop()}}),r)}))))}))},this._queueItem=function(e){e.queued||(e.queued=!0,t.queue.add((function(){return t._loadItem(e)})))},this._loadItem=function(e){return new Promise((function(r,n){t.assets[e.id]&&r(),e.on(S.EVENTS.ITEM_COMPLETE,(function(){r()})),e.loadItem()}))},Object.assign(this,T.a),Object.assign(this,A.a),this.assets={},this.items={},this.manifests={},this.queue=new _(2)}return Object(v.a)(e,[{key:"EVENTS",get:function(){return F}},{key:"getAsset",value:function(e){return this.assets[e]}},{key:"getItem",value:function(e){return this.items[e]}},{key:"getManifest",value:function(e){return this.manifests[e]}},{key:"getManifestLoaded",value:function(e){var t=this.resolveManifest(e);return t&&t.complete}},{key:"getManifestProgress",value:function(e){var t=this.resolveManifest(e);return t?t.progress:0}},{key:"subscribeManifestLoaded",value:function(e,t){var r=this.resolveManifestId(e),n=this.resolveManifest(e);if(n&&n.complete)t(n);else if(r)return this.subscription(F.MANIFEST_COMPLETE,(function(e){e.id===r&&t(e)}))}},{key:"subscribeManifestProgress",value:function(e,t){var r=this.resolveManifestId(e),n=this.resolveManifest(e);if(n&&n.complete)t(n);else if(r)return this.subscription(F.MANIFEST_PROGRESS,(function(e){e.id===r&&t(e)}))}},{key:"resolveManifestId",value:function(e){return e&&e.id?e.id:"string"==typeof e?e:null}},{key:"resolveManifest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.resolveManifestId(e),n=e.id?this._registerManifest(e):this.getManifest(r);return t&&!n&&console.error("resolveManifest : non viable manifest or not yet register id:",n),n}},{key:"getItemLoaded",value:function(e){var t=this.resolveItemId(e);return t&&this.getAsset(t)&&this.getAsset(t).complete}},{key:"getItemProgress",value:function(e){var t=this.resolveItemId(e);return t&&this.getAsset(t)?this.getAsset(t).progress:0}},{key:"subscribeItemLoaded",value:function(e,t){var r=this.resolveItemId(e),n=this.resolveItem(e);if(n&&n.complete&&t(n),r)return this.subscription(F.ITEM_COMPLETE,(function(e){e.id===r&&t(e)}))}},{key:"subscribeItemProgress",value:function(e,t){var r=this.resolveItemId(e),n=this.resolveItem(e);if(n&&n.complete&&t(n),r)return this.subscription(F.ITEM_PROGRESS,(function(e){e.id===r&&t(e)}))}},{key:"resolveItemId",value:function(e){return e&&e.id?ItemOrId.id:"string"==typeof e?e:null}},{key:"resolveItem",value:function(e){return this.getItem(this.resolveItemId(e))}},{key:"_registerItem",value:function(e){var t=this,r=S.getItemId(e);return r&&!this.items[r]&&((e=new S(e)).on(S.EVENTS.ITEM_COMPLETE,(function(e){t.assets[e.id]=e.asset,t.emit(F.ITEM_COMPLETE,e)})),e.on(S.EVENTS.ITEM_PROGRESS,(function(e){t.emit(F.ITEM_PROGRESS,e)})),this.items[r]=e),this.items[r]}},{key:"_registerManifest",value:function(e){var t=this;return this.manifests[e.id]||this.manifests[e.id]||(e=new P(e,this),this.manifests[e.id]=e,e.on(P.EVENTS.MANIFEST_COMPLETE,(function(e){t.emit(F.MANIFEST_COMPLETE,e)})),e.on(P.EVENTS.MANIFEST_PROGRESS,(function(e){t.emit(F.MANIFEST_PROGRESS,e)}))),this.manifests[e.id]}}],[{key:"EVENTS",get:function(){return F}}]),e}()),B=r(216);function D(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var U={computed:N({},Object(c.d)("browser",["breakpoint"])),fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(h.a)(100);case 3:return e.setLoadState(f.c.START),t.next=6,e.$nextTick();case 6:return t.next=8,e.load(f.c.CRITICAL);case 8:return t.next=10,e.load();case 10:return t.next=12,e.loadFromCms();case 12:e.setLoadState(f.c.COMPLETE);case 13:case"end":return t.stop()}}),t)})))()},created:function(){this.$fetch()},methods:N(N({},Object(c.c)("app",["setModalState","setLoadState"])),{},{load:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="mobile"==e.breakpoint?"MOBILE":"DESKTOP",n="".concat(e.$store.getters["app/manifestId"],"_").concat(r),o=e.$store.getters["app/cmsLoadId"],!j.getManifestLoaded(n)){t.next=6;break}return t.abrupt("return");case 6:if(c=B[n]){t.next=9;break}return t.abrupt("return");case 9:return e.setLoadState(o),t.next=12,j.loadManifest(c);case 12:case"end":return t.stop()}}),t)})))()},loadFromCms:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$store.getters["app/cmsManifestId"],n=e.$store.getters["app/cmsLoadId"],!j.getManifestLoaded(r)){t.next=5;break}return t.abrupt("return");case 5:if(!(o=e.$store.state.app.manifest_cms[r])){t.next=11;break}return c={id:r,items:o},e.setLoadState(n),t.next=11,j.loadManifest(c);case 11:case"end":return t.stop()}}),t)})))()}})},G=(r(31),r(49),r(54),r(64),function(data){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=JSON.stringify(data);return e.forEach((function(e){var r=JSON.stringify(e.value).slice(1).slice(0,-1).replace(/["]/g,'\\"'),n=e.key;t=t.split(n).join(r)})),JSON.parse(t)});function H(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?H(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):H(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var X={mixins:[d.a,{mounted:function(){var e=this;this.$storybridge.on("input",(function(t){t.story.id===e.story.id&&(e.story.content=t.story.content)})),this.$storybridge.on(["published","change"],(function(t){e.$nuxt.$router.go({path:e.$nuxt.$router.currentRoute,force:!0})}))}},U],asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,f,h,m,path,v,T;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$storyapi,n=e.route,o=e.store,c=e.error,d=e.query,f=e.isDev,-1===n.path.indexOf("*")){t.next=3;break}return t.abrupt("return",null);case 3:return h=o.state.browser.lang,m="/"===n.path.slice(-1)?n.path:"".concat(n.path,"/"),path=Object(l.b)(m)?m:"".concat(h).concat(m),v=d._storyblok||f?"draft":"published",t.prev=7,t.next=10,r.get("cdn/stories/".concat(path),{version:v});case 10:return T=t.sent,t.abrupt("return",T.data);case 14:t.prev=14,t.t0=t.catch(7),t.t0.response?c({statusCode:t.t0.response.status,message:t.t0.response.data}):(console.error(t.t0),c({statusCode:404,message:"Failed to receive content from api"}));case 17:case"end":return t.stop()}}),t,null,[[7,14]])})))()},mounted:function(){window.defaultPage=this,window.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},methods:V(V({},Object(c.c)("app",["toggleDebug"])),{},{onKeyDown:function(e){68===e.keyCode&&this.toggleDebug()}}),computed:{storyReplace:function(){var e=this,t=JSON.parse(JSON.stringify(this.story));return console.log("story",t),null!=t&&t.content&&Object.keys(t.content).forEach((function(r){t.content[r]=G(e.story.content[r],e.$store.getters["storyblok/global"].template_variables)})),t}}},$=r(5),component=Object($.a)(X,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.storyReplace?r(e.storyReplace.content.component,{tag:"component",attrs:{story:e.storyReplace}}):e._e()],1)}),[],!1,null,"313e0975",null);t.default=component.exports},769:function(e,t,r){"use strict";r(17),r(14),r(18),r(20),r(9),r(21);var n=r(4),o=r(12),c=r(257),l={head:function(){var head=this.$root.$options.head;return"function"==typeof head&&(head=head()),Object(c.b)(this.story,head,this.$config.base_url,this.$route.path)}},d=(r(42),r(11));function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}t.a={mixins:[l,{methods:{sendPageView:function(e,t){this.$gtm.push({routeName:this.$route.name,pageType:"PageView",pageUrl:e||this.$route.fullPath,pageTitle:t||this.$meta().refresh().metaInfo.title,event:this.$config.gtm.pageViewEventName})},sendEvent:function(e){this.$gtm.push(e)}}}],scrollToTop:!0,components:{},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(o.d)("app",["route"])),beforeMount:function(){},mounted:function(){var e=this,t=this.route.skipPageTransition?0:.5,r=this.route.skipPageTransition?0:.5;this.$gsap.to(this.$el,{opacity:1,ease:"sine.out",duration:t,delay:r}),this.$nextTick((function(){e.sendPageView()}))},beforeDestroy:function(){},transition:{css:!1,mode:"out-in",enter:function(e,t){this.$store.commit("app/setPageTransitionState",d.e.ENTER);var r=this.$gsap.timeline({onComplete:t});this.$store.state.app.route.skipPageTransition?this.$nextTick(t):r.from(e,{opacity:1,ease:"power2.out",duration:1})},leave:function(e,t){this.$store.commit("app/setPageTransitionState",d.e.LEAVE);var r=this.$gsap.timeline({onComplete:t});this.$store.state.app.route.skipPageTransition?this.$nextTick(t):r.to(e,{opacity:1,ease:"power2.out",duration:1,delay:.5})},beforeLeave:function(e,t){var r=this;this.$nextTick((function(){r.$store.commit("app/setPageTransitionState",d.e.BEFORE_LEAVE)}))},afterLeave:function(e,t){var r=this;this.$nextTick((function(){r.$store.commit("app/setPageTransitionState",d.e.AFTER_LEAVE)}))},beforeEnter:function(e,t){var r=this;this.$nextTick((function(){r.$store.commit("app/setPageTransitionState",d.e.BEFORE_ENTER)}))},afterEnter:function(e,t){var r=this;this.$nextTick((function(){r.$store.commit("app/setPageTransitionState",d.e.AFTER_ENTER)}))},enterCancelled:function(e,t){this.$store.commit("app/setPageTransitionState",d.e.ENTER_CANCELLED)},leaveCancelled:function(e,t){this.$store.commit("app/setPageTransitionState",d.e.LEAVE_CANCELLED)}},methods:{},watch:{}}},896:function(e,t,r){"use strict";var n=r(41),o=(r(25),r(32),r(33),r(109),new function e(){Object(n.a)(this,e),this.load_xhr_url=function(e,t){return new Promise((function(r){var n=new XMLHttpRequest;n.crossOrigin="anonymous",n.responseType="blob",t&&(n.onprogress=t),n.onload=function(){var e=window.URL?URL.createObjectURL(n.response):null;r({xhr:n,blobUrl:e})},n.open("GET",e),n.send()}))}});t.a=o},978:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return T})),r.d(t,"c",(function(){return y}));var n,o=r(4),c=(r(17),r(1108)),l=r(1e3),d=r(1001),f=r(1006),h=r(1007),m=r(896),v={OTHER:"OTHER",JSON:"JSON",VIDEO:"VIDEO",FONT:"FONT",AUDIO:"AUDIO",IMAGE:"IMAGE",TEXTURE:"TEXTURE",GLTF:"GLTF",BASIS_TEXTURE:"BASIS_TEXTURE"},T=(n={},Object(o.a)(n,v.OTHER,{loader:m.a.load_xhr_url,processor:function(e,t){}}),Object(o.a)(n,v.JSON,{regExp:/\.(json)$/i,loader:m.a.load_xhr_url,processor:function(e,t){}}),Object(o.a)(n,v.VIDEO,{regExp:/\.(mp4|webm)$/i,argIsItem:!0,loader:h.a.load_video_item,processor:function(e,t){}}),Object(o.a)(n,v.FONT,{regExp:/\.(ttf|woff|otf|woff2)$/i,argIsItem:!0,loader:f.a.load_font_item,processor:function(e,t){}}),Object(o.a)(n,v.AUDIO,{regExp:/\.(mp3|acc|wav|ogg)$/i,argIsItem:!0,loader:c.a.load_audio_url,processor:function(e,t){}}),Object(o.a)(n,v.IMAGE,{regExp:/\.(jpg|png|gif|webp)$/i,loader:l.a.load_image_url,processor:function(e,t){}}),Object(o.a)(n,v.GLTF,{regExp:/\.(gltf|glb)$/i,loader:d.a.load_gltf_url,processor:function(e,t){}}),Object(o.a)(n,v.TEXTURE,{regExp:/\.(jpg\?gl|bmp\?gl|png\?gl|gif\?gl|webp\?gl)$/i,loader:d.a.load_texture_url,processor:function(t,r){var n=t.options;n&&(!1===n.mipmap&&(r.magFilter=e.LinearFilter,r.minFilter=e.LinearFilter,r.needsUpdate=!0),r.flipY=!!n.flipY,r.needsUpdate=!0)}}),Object(o.a)(n,v.BASIS_TEXTURE,{regExp:/\.(basis)$/i,loader:d.a.load_basis_url,processor:function(e,t){}}),n),y=function(e){for(var map=T,t=0,r=Object.keys(map);t<r.length;t++){var n,o=r[t];if(null!==(n=map[o].regExp)&&void 0!==n&&n.test(e))return o}return"OTHER"}}).call(this,r(610))}}]);